import { filterFieldsByNameTransformer } from './filterByName.js';
import { DataTransformerID } from './ids.js';
import { orderFieldsTransformer } from './order.js';
import { renameFieldsTransformer } from './rename.js';

const organizeFieldsTransformer = {
  id: DataTransformerID.organize,
  name: "Organize fields by name",
  description: "Order, filter and rename fields based on configuration given by user",
  defaultOptions: {
    excludeByName: {},
    indexByName: {},
    renameByName: {}
  },
  operator: (options) => (source) => source.pipe(
    filterFieldsByNameTransformer.operator({
      exclude: { names: mapToExcludeArray(options.excludeByName) }
    }),
    orderFieldsTransformer.operator(options),
    renameFieldsTransformer.operator(options)
  )
};
const mapToExcludeArray = (excludeByName) => {
  if (!excludeByName) {
    return [];
  }
  return Object.keys(excludeByName).filter((name) => excludeByName[name]);
};

export { organizeFieldsTransformer };
//# sourceMappingURL=organize.js.map
