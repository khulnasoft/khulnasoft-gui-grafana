{"version":3,"file":"organize.js","sources":["../../../../src/transformations/transformers/organize.ts"],"sourcesContent":["import { DataTransformerInfo } from '../../types/transformations';\n\nimport { filterFieldsByNameTransformer } from './filterByName';\nimport { DataTransformerID } from './ids';\nimport { orderFieldsTransformer, OrderFieldsTransformerOptions } from './order';\nimport { renameFieldsTransformer, RenameFieldsTransformerOptions } from './rename';\n\nexport interface OrganizeFieldsTransformerOptions\n  extends OrderFieldsTransformerOptions,\n    RenameFieldsTransformerOptions {\n  excludeByName: Record<string, boolean>;\n}\n\nexport const organizeFieldsTransformer: DataTransformerInfo<OrganizeFieldsTransformerOptions> = {\n  id: DataTransformerID.organize,\n  name: 'Organize fields by name',\n  description: 'Order, filter and rename fields based on configuration given by user',\n  defaultOptions: {\n    excludeByName: {},\n    indexByName: {},\n    renameByName: {},\n  },\n\n  /**\n   * Return a modified copy of the series.  If the transform is not or should not\n   * be applied, just return the input series\n   */\n  operator: (options) => (source) =>\n    source.pipe(\n      filterFieldsByNameTransformer.operator({\n        exclude: { names: mapToExcludeArray(options.excludeByName) },\n      }),\n      orderFieldsTransformer.operator(options),\n      renameFieldsTransformer.operator(options)\n    ),\n};\n\nconst mapToExcludeArray = (excludeByName: Record<string, boolean>): string[] => {\n  if (!excludeByName) {\n    return [];\n  }\n\n  return Object.keys(excludeByName).filter((name) => excludeByName[name]);\n};\n"],"names":[],"mappings":";;;;;AAaO,MAAM,yBAAmF,GAAA;AAAA,EAC9F,IAAI,iBAAkB,CAAA,QAAA;AAAA,EACtB,IAAM,EAAA,yBAAA;AAAA,EACN,WAAa,EAAA,sEAAA;AAAA,EACb,cAAgB,EAAA;AAAA,IACd,eAAe,EAAC;AAAA,IAChB,aAAa,EAAC;AAAA,IACd,cAAc,EAAC;AAAA,GACjB;AAAA,EAMA,QAAU,EAAA,CAAC,OAAY,KAAA,CAAC,WACtB,MAAO,CAAA,IAAA;AAAA,IACL,8BAA8B,QAAS,CAAA;AAAA,MACrC,SAAS,EAAE,KAAA,EAAO,iBAAkB,CAAA,OAAA,CAAQ,aAAa,CAAE,EAAA;AAAA,KAC5D,CAAA;AAAA,IACD,sBAAA,CAAuB,SAAS,OAAO,CAAA;AAAA,IACvC,uBAAA,CAAwB,SAAS,OAAO,CAAA;AAAA,GAC1C;AACJ,EAAA;AAEA,MAAM,iBAAA,GAAoB,CAAC,aAAqD,KAAA;AAC9E,EAAA,IAAI,CAAC,aAAe,EAAA;AAClB,IAAA,OAAO,EAAC,CAAA;AAAA,GACV;AAEA,EAAO,OAAA,MAAA,CAAO,KAAK,aAAa,CAAA,CAAE,OAAO,CAAC,IAAA,KAAS,cAAc,IAAK,CAAA,CAAA,CAAA;AACxE,CAAA;;;;"}