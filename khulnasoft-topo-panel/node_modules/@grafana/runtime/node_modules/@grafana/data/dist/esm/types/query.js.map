{"version":3,"file":"query.js","sources":["../../../src/types/query.ts"],"sourcesContent":["/**\n * Attached to query results (not persisted)\n *\n * @public\n */\nexport enum DataTopic {\n  Annotations = 'annotations',\n}\n\n/**\n * @public\n */\nexport interface DataSourceRef {\n  /** The plugin type-id */\n  type?: string;\n\n  /** Specific datasource instance */\n  uid?: string;\n}\n\n/**\n * These are the common properties available to all queries in all datasources\n * Specific implementations will *extend* this interface adding the required properties\n * for the given context\n *\n * @public\n */\nexport interface DataQuery {\n  /**\n   * A - Z\n   */\n  refId: string;\n\n  /**\n   * true if query is disabled (ie should not be returned to the dashboard)\n   */\n  hide?: boolean;\n\n  /**\n   * Unique, guid like, string used in explore mode\n   */\n  key?: string;\n\n  /**\n   * Specify the query flavor\n   */\n  queryType?: string;\n\n  /**\n   * For mixed data sources the selected datasource is on the query level.\n   * For non mixed scenarios this is undefined.\n   */\n  datasource?: DataSourceRef | null;\n}\n\n/**\n * Abstract representation of any label-based query\n * @internal\n */\nexport interface AbstractQuery extends DataQuery {\n  labelMatchers: AbstractLabelMatcher[];\n}\n\n/**\n * @internal\n */\nexport enum AbstractLabelOperator {\n  Equal = 'Equal',\n  NotEqual = 'NotEqual',\n  EqualRegEx = 'EqualRegEx',\n  NotEqualRegEx = 'NotEqualRegEx',\n}\n\n/**\n * @internal\n */\nexport type AbstractLabelMatcher = {\n  name: string;\n  value: string;\n  operator: AbstractLabelOperator;\n};\n\n/**\n * @internal\n */\nexport interface DataSourceWithQueryImportSupport<TQuery extends DataQuery> {\n  importFromAbstractQueries(labelBasedQuery: AbstractQuery[]): Promise<TQuery[]>;\n}\n\n/**\n * @internal\n */\nexport interface DataSourceWithQueryExportSupport<TQuery extends DataQuery> {\n  exportToAbstractQueries(query: TQuery[]): Promise<AbstractQuery[]>;\n}\n\n/**\n * @internal\n */\nexport const hasQueryImportSupport = <TQuery extends DataQuery>(\n  datasource: unknown\n): datasource is DataSourceWithQueryImportSupport<TQuery> => {\n  return (datasource as DataSourceWithQueryImportSupport<TQuery>).importFromAbstractQueries !== undefined;\n};\n\n/**\n * @internal\n */\nexport const hasQueryExportSupport = <TQuery extends DataQuery>(\n  datasource: unknown\n): datasource is DataSourceWithQueryExportSupport<TQuery> => {\n  return (datasource as DataSourceWithQueryExportSupport<TQuery>).exportToAbstractQueries !== undefined;\n};\n"],"names":["DataTopic","AbstractLabelOperator"],"mappings":"AAKY,IAAA,SAAA,qBAAAA,UAAL,KAAA;AACL,EAAAA,WAAA,aAAc,CAAA,GAAA,aAAA,CAAA;AADJ,EAAAA,OAAAA,UAAAA,CAAAA;AAAA,CAAA,EAAA,SAAA,IAAA,EAAA,EAAA;AA6DA,IAAA,qBAAA,qBAAAC,sBAAL,KAAA;AACL,EAAAA,uBAAA,OAAQ,CAAA,GAAA,OAAA,CAAA;AACR,EAAAA,uBAAA,UAAW,CAAA,GAAA,UAAA,CAAA;AACX,EAAAA,uBAAA,YAAa,CAAA,GAAA,YAAA,CAAA;AACb,EAAAA,uBAAA,eAAgB,CAAA,GAAA,eAAA,CAAA;AAJN,EAAAA,OAAAA,sBAAAA,CAAAA;AAAA,CAAA,EAAA,qBAAA,IAAA,EAAA,EAAA;AAiCC,MAAA,qBAAA,GAAwB,CACnC,UAC2D,KAAA;AAC3D,EAAA,OAAQ,WAAwD,yBAA8B,KAAA,KAAA,CAAA,CAAA;AAChG,EAAA;AAKa,MAAA,qBAAA,GAAwB,CACnC,UAC2D,KAAA;AAC3D,EAAA,OAAQ,WAAwD,uBAA4B,KAAA,KAAA,CAAA,CAAA;AAC9F;;;;"}