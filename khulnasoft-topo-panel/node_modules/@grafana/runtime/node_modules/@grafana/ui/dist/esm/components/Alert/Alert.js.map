{"version":3,"file":"Alert.js","sources":["../../../../src/components/Alert/Alert.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { useId } from '@react-aria/utils';\nimport React, { HTMLAttributes, ReactNode } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useTheme2 } from '../../themes';\nimport { IconName } from '../../types/icon';\nimport { Button } from '../Button/Button';\nimport { Icon } from '../Icon/Icon';\nimport { IconButton } from '../IconButton/IconButton';\n\nexport type AlertVariant = 'success' | 'warning' | 'error' | 'info';\n\nexport interface Props extends HTMLAttributes<HTMLDivElement> {\n  title: string;\n  /** On click handler for alert button, mostly used for dismissing the alert */\n  onRemove?: (event: React.MouseEvent) => void;\n  severity?: AlertVariant;\n  children?: ReactNode;\n  elevated?: boolean;\n  buttonContent?: React.ReactNode | string;\n  bottomSpacing?: number;\n  topSpacing?: number;\n}\n\nexport function getIconFromSeverity(severity: AlertVariant): IconName {\n  switch (severity) {\n    case 'error':\n    case 'warning':\n      return 'exclamation-triangle';\n    case 'info':\n      return 'info-circle';\n    case 'success':\n      return 'check';\n  }\n}\n\nexport const Alert = React.forwardRef<HTMLDivElement, Props>(\n  (\n    {\n      title,\n      onRemove,\n      children,\n      buttonContent,\n      elevated,\n      bottomSpacing,\n      topSpacing,\n      className,\n      severity = 'error',\n      ...restProps\n    },\n    ref\n  ) => {\n    const theme = useTheme2();\n    const styles = getStyles(theme, severity, elevated, bottomSpacing, topSpacing);\n    const titleId = useId();\n\n    return (\n      <div\n        ref={ref}\n        className={cx(styles.alert, className)}\n        data-testid={selectors.components.Alert.alertV2(severity)}\n        role=\"alert\"\n        aria-labelledby={titleId}\n        {...restProps}\n      >\n        <div className={styles.icon}>\n          <Icon size=\"xl\" name={getIconFromSeverity(severity)} />\n        </div>\n\n        <div className={styles.body}>\n          <div id={titleId} className={styles.title}>\n            {title}\n          </div>\n          {children && <div className={styles.content}>{children}</div>}\n        </div>\n\n        {/* If onRemove is specified, giving preference to onRemove */}\n        {onRemove && !buttonContent && (\n          <div className={styles.close}>\n            <IconButton aria-label=\"Close alert\" name=\"times\" onClick={onRemove} size=\"lg\" type=\"button\" />\n          </div>\n        )}\n\n        {onRemove && buttonContent && (\n          <div className={styles.buttonWrapper}>\n            <Button aria-label=\"Close alert\" variant=\"secondary\" onClick={onRemove} type=\"button\">\n              {buttonContent}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nAlert.displayName = 'Alert';\n\nconst getStyles = (\n  theme: GrafanaTheme2,\n  severity: AlertVariant,\n  elevated?: boolean,\n  bottomSpacing?: number,\n  topSpacing?: number\n) => {\n  const color = theme.colors[severity];\n  const borderRadius = theme.shape.borderRadius();\n\n  return {\n    alert: css`\n      flex-grow: 1;\n      position: relative;\n      border-radius: ${borderRadius};\n      display: flex;\n      flex-direction: row;\n      align-items: stretch;\n      background: ${theme.colors.background.secondary};\n      box-shadow: ${elevated ? theme.shadows.z3 : theme.shadows.z1};\n      margin-bottom: ${theme.spacing(bottomSpacing ?? 2)};\n      margin-top: ${theme.spacing(topSpacing ?? 0)};\n\n      &:before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background: ${theme.colors.background.primary};\n        z-index: -1;\n      }\n    `,\n    icon: css`\n      padding: ${theme.spacing(2, 3)};\n      background: ${color.main};\n      border-radius: ${borderRadius} 0 0 ${borderRadius};\n      color: ${color.contrastText};\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `,\n    title: css`\n      font-weight: ${theme.typography.fontWeightMedium};\n      color: ${theme.colors.text.primary};\n    `,\n    body: css`\n      color: ${theme.colors.text.secondary};\n      padding: ${theme.spacing(2)};\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      overflow-wrap: break-word;\n      word-break: break-word;\n    `,\n    content: css`\n      color: ${theme.colors.text.secondary};\n      padding-top: ${theme.spacing(1)};\n      max-height: 50vh;\n      overflow-y: auto;\n    `,\n    buttonWrapper: css`\n      padding: ${theme.spacing(1)};\n      background: none;\n      display: flex;\n      align-items: center;\n    `,\n    close: css`\n      padding: ${theme.spacing(2, 1)};\n      background: none;\n      display: flex;\n    `,\n  };\n};\n"],"names":["React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BO,SAAS,oBAAoB,QAAkC,EAAA;AACpE,EAAA,QAAQ,QAAU;AAAA,IAChB,KAAK,OAAA,CAAA;AAAA,IACL,KAAK,SAAA;AACH,MAAO,OAAA,sBAAA,CAAA;AAAA,IACT,KAAK,MAAA;AACH,MAAO,OAAA,aAAA,CAAA;AAAA,IACT,KAAK,SAAA;AACH,MAAO,OAAA,OAAA,CAAA;AAAA,GACX;AACF,CAAA;AAEO,MAAM,QAAQA,cAAM,CAAA,UAAA;AAAA,EACzB,CACE,IAYA,GACG,KAAA;AAbH,IACE,IAAA,EAAA,GAAA,EAAA,EAAA;AAAA,MAAA,KAAA;AAAA,MACA,QAAA;AAAA,MACA,QAAA;AAAA,MACA,aAAA;AAAA,MACA,QAAA;AAAA,MACA,aAAA;AAAA,MACA,UAAA;AAAA,MACA,SAAA;AAAA,MACA,QAAW,GAAA,OAAA;AAAA,KAlDjB,GAyCI,EAUK,EAAA,SAAA,GAAA,SAAA,CAVL,EAUK,EAAA;AAAA,MATH,OAAA;AAAA,MACA,UAAA;AAAA,MACA,UAAA;AAAA,MACA,eAAA;AAAA,MACA,UAAA;AAAA,MACA,eAAA;AAAA,MACA,YAAA;AAAA,MACA,WAAA;AAAA,MACA,UAAA;AAAA,KAAA,CAAA,CAAA;AAKF,IAAA,MAAM,QAAQ,SAAU,EAAA,CAAA;AACxB,IAAA,MAAM,SAAS,SAAU,CAAA,KAAA,EAAO,QAAU,EAAA,QAAA,EAAU,eAAe,UAAU,CAAA,CAAA;AAC7E,IAAA,MAAM,UAAU,KAAM,EAAA,CAAA;AAEtB,IAAA,uBACGA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA,cAAA,CAAA;AAAA,MACC,GAAA;AAAA,MACA,SAAW,EAAA,EAAA,CAAG,MAAO,CAAA,KAAA,EAAO,SAAS,CAAA;AAAA,MACrC,aAAa,EAAA,SAAA,CAAU,UAAW,CAAA,KAAA,CAAM,QAAQ,QAAQ,CAAA;AAAA,MACxD,IAAK,EAAA,OAAA;AAAA,MACL,iBAAiB,EAAA,OAAA;AAAA,KAAA,EACb,4BAEHA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,MAAI,WAAW,MAAO,CAAA,IAAA;AAAA,KAAA,kBACpBA,cAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAA,MAAK,IAAK,EAAA,IAAA;AAAA,MAAK,IAAA,EAAM,oBAAoB,QAAQ,CAAA;AAAA,KAAG,CACvD,mBAECA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,MAAI,WAAW,MAAO,CAAA,IAAA;AAAA,KAAA,kBACpBA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,MAAI,EAAI,EAAA,OAAA;AAAA,MAAS,WAAW,MAAO,CAAA,KAAA;AAAA,KACjC,EAAA,KACH,CACC,EAAA,QAAA,oBAAaA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,MAAI,WAAW,MAAO,CAAA,OAAA;AAAA,KAAA,EAAU,QAAS,CACzD,CAAA,EAGC,QAAY,IAAA,CAAC,iCACXA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,MAAI,WAAW,MAAO,CAAA,KAAA;AAAA,KAAA,kBACpBA,cAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AAAA,MAAW,YAAW,EAAA,aAAA;AAAA,MAAc,IAAK,EAAA,OAAA;AAAA,MAAQ,OAAS,EAAA,QAAA;AAAA,MAAU,IAAK,EAAA,IAAA;AAAA,MAAK,IAAK,EAAA,QAAA;AAAA,KAAS,CAC/F,CAAA,EAGD,QAAY,IAAA,aAAA,oBACVA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,MAAI,WAAW,MAAO,CAAA,aAAA;AAAA,KAAA,kBACpBA,cAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAA,MAAO,YAAW,EAAA,aAAA;AAAA,MAAc,OAAQ,EAAA,WAAA;AAAA,MAAY,OAAS,EAAA,QAAA;AAAA,MAAU,IAAK,EAAA,QAAA;AAAA,KAC1E,EAAA,aACH,CACF,CAEJ,CAAA,CAAA;AAAA,GAEJ;AACF,EAAA;AAEA,KAAA,CAAM,WAAc,GAAA,OAAA,CAAA;AAEpB,MAAM,YAAY,CAChB,KAAA,EACA,QACA,EAAA,QAAA,EACA,eACA,UACG,KAAA;AACH,EAAM,MAAA,KAAA,GAAQ,MAAM,MAAO,CAAA,QAAA,CAAA,CAAA;AAC3B,EAAM,MAAA,YAAA,GAAe,KAAM,CAAA,KAAA,CAAM,YAAa,EAAA,CAAA;AAE9C,EAAO,OAAA;AAAA,IACL,KAAO,EAAA,GAAA,CAAA;AAAA;AAAA;AAAA,qBAGY,EAAA,YAAA,CAAA;AAAA;AAAA;AAAA;AAAA,kBAIH,EAAA,KAAA,CAAM,OAAO,UAAW,CAAA,SAAA,CAAA;AAAA,kBAAA,EACxB,QAAW,GAAA,KAAA,CAAM,OAAQ,CAAA,EAAA,GAAK,MAAM,OAAQ,CAAA,EAAA,CAAA;AAAA,qBACzC,EAAA,KAAA,CAAM,OAAQ,CAAA,aAAA,IAAA,IAAA,GAAA,aAAA,GAAiB,CAAC,CAAA,CAAA;AAAA,kBACnC,EAAA,KAAA,CAAM,OAAQ,CAAA,UAAA,IAAA,IAAA,GAAA,UAAA,GAAc,CAAC,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAS3B,EAAA,KAAA,CAAM,OAAO,UAAW,CAAA,OAAA,CAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAI1C,IAAM,EAAA,GAAA,CAAA;AAAA,eACO,EAAA,KAAA,CAAM,OAAQ,CAAA,CAAA,EAAG,CAAC,CAAA,CAAA;AAAA,kBAAA,EACf,KAAM,CAAA,IAAA,CAAA;AAAA,qBAAA,EACH,YAAoB,CAAA,KAAA,EAAA,YAAA,CAAA;AAAA,aAAA,EAC5B,KAAM,CAAA,YAAA,CAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAKjB,KAAO,EAAA,GAAA,CAAA;AAAA,mBAAA,EACU,MAAM,UAAW,CAAA,gBAAA,CAAA;AAAA,aACvB,EAAA,KAAA,CAAM,OAAO,IAAK,CAAA,OAAA,CAAA;AAAA,IAAA,CAAA;AAAA,IAE7B,IAAM,EAAA,GAAA,CAAA;AAAA,aACK,EAAA,KAAA,CAAM,OAAO,IAAK,CAAA,SAAA,CAAA;AAAA,eAChB,EAAA,KAAA,CAAM,QAAQ,CAAC,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAQ5B,OAAS,EAAA,GAAA,CAAA;AAAA,aACE,EAAA,KAAA,CAAM,OAAO,IAAK,CAAA,SAAA,CAAA;AAAA,mBACZ,EAAA,KAAA,CAAM,QAAQ,CAAC,CAAA,CAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAIhC,aAAe,EAAA,GAAA,CAAA;AAAA,eACF,EAAA,KAAA,CAAM,QAAQ,CAAC,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAK5B,KAAO,EAAA,GAAA,CAAA;AAAA,eACM,EAAA,KAAA,CAAM,OAAQ,CAAA,CAAA,EAAG,CAAC,CAAA,CAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,GAIjC,CAAA;AACF,CAAA;;;;"}