{"version":3,"file":"CollapsableSection.js","sources":["../../../../src/components/Collapse/CollapsableSection.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { uniqueId } from 'lodash';\nimport React, { FC, ReactNode, useRef, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { Icon, Spinner } from '..';\nimport { useStyles2 } from '../../themes';\nimport { getFocusStyles } from '../../themes/mixins';\n\nexport interface Props {\n  label: ReactNode;\n  isOpen: boolean;\n  /** Callback for the toggle functionality */\n  onToggle?: (isOpen: boolean) => void;\n  children: ReactNode;\n  className?: string;\n  contentClassName?: string;\n  loading?: boolean;\n  labelId?: string;\n  headerDataTestId?: string;\n  contentDataTestId?: string;\n}\n\nexport const CollapsableSection: FC<Props> = ({\n  label,\n  isOpen,\n  onToggle,\n  className,\n  contentClassName,\n  children,\n  labelId,\n  loading = false,\n  headerDataTestId,\n  contentDataTestId,\n}) => {\n  const [open, toggleOpen] = useState<boolean>(isOpen);\n  const styles = useStyles2(collapsableSectionStyles);\n\n  const onClick = (e: React.MouseEvent) => {\n    if (e.target instanceof HTMLElement && e.target.tagName === 'A') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    onToggle?.(!open);\n    toggleOpen(!open);\n  };\n  const { current: id } = useRef(uniqueId());\n\n  const buttonLabelId = labelId ?? `collapse-label-${id}`;\n\n  return (\n    <>\n      <div onClick={onClick} className={cx(styles.header, className)}>\n        <button\n          id={`collapse-button-${id}`}\n          className={styles.button}\n          onClick={onClick}\n          aria-expanded={open && !loading}\n          aria-controls={`collapse-content-${id}`}\n          aria-labelledby={buttonLabelId}\n        >\n          {loading ? (\n            <Spinner className={styles.spinner} />\n          ) : (\n            <Icon name={open ? 'angle-up' : 'angle-down'} className={styles.icon} />\n          )}\n        </button>\n        <div className={styles.label} id={`collapse-label-${id}`} data-testid={headerDataTestId}>\n          {label}\n        </div>\n      </div>\n      {open && (\n        <div\n          id={`collapse-content-${id}`}\n          className={cx(styles.content, contentClassName)}\n          data-testid={contentDataTestId}\n        >\n          {children}\n        </div>\n      )}\n    </>\n  );\n};\n\nconst collapsableSectionStyles = (theme: GrafanaTheme2) => ({\n  header: css({\n    display: 'flex',\n    cursor: 'pointer',\n    boxSizing: 'border-box',\n    flexDirection: 'row-reverse',\n    position: 'relative',\n    justifyContent: 'space-between',\n    fontSize: theme.typography.size.lg,\n    padding: `${theme.spacing(0.5)} 0`,\n    '&:focus-within': getFocusStyles(theme),\n  }),\n  button: css({\n    all: 'unset',\n    '&:focus-visible': {\n      outline: 'none',\n      outlineOffset: 'unset',\n      transition: 'none',\n      boxShadow: 'none',\n    },\n  }),\n  icon: css({\n    color: theme.colors.text.secondary,\n  }),\n  content: css({\n    padding: `${theme.spacing(2)} 0`,\n  }),\n  spinner: css({\n    display: 'flex',\n    alignItems: 'center',\n    width: theme.spacing(2),\n  }),\n  label: css({\n    display: 'flex',\n  }),\n});\n"],"names":["React"],"mappings":"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"}