{"version":3,"file":"DatePickerWithInput.js","sources":["../../../../../src/components/DateTimePickers/DatePickerWithInput/DatePickerWithInput.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { ChangeEvent } from 'react';\n\nimport { dateTime } from '@grafana/data';\n\nimport { useStyles2 } from '../../../themes';\nimport { Props as InputProps, Input } from '../../Input/Input';\nimport { DatePicker } from '../DatePicker/DatePicker';\n\nexport const formatDate = (date: Date | string) => dateTime(date).format('L');\n\n/** @public */\nexport interface DatePickerWithInputProps extends Omit<InputProps, 'ref' | 'value' | 'onChange'> {\n  /** Value selected by the DatePicker */\n  value?: Date | string;\n  /** The minimum date the value can be set to */\n  minDate?: Date;\n  /** Handles changes when a new date is selected */\n  onChange: (value: Date | string) => void;\n  /** Hide the calendar when date is selected */\n  closeOnSelect?: boolean;\n  /** Text that appears when the input has no text */\n  placeholder?: string;\n}\n\n/** @public */\nexport const DatePickerWithInput = ({\n  value,\n  minDate,\n  onChange,\n  closeOnSelect,\n  placeholder = 'Date',\n  ...rest\n}: DatePickerWithInputProps) => {\n  const [open, setOpen] = React.useState(false);\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <Input\n        type=\"text\"\n        autoComplete={'off'}\n        placeholder={placeholder}\n        value={value ? formatDate(value) : value}\n        onClick={() => setOpen(true)}\n        onChange={(ev: ChangeEvent<HTMLInputElement>) => {\n          // Allow resetting the date\n          if (ev.target.value === '') {\n            onChange('');\n          }\n        }}\n        className={styles.input}\n        {...rest}\n      />\n      <DatePicker\n        isOpen={open}\n        value={value && typeof value !== 'string' ? value : dateTime().toDate()}\n        minDate={minDate}\n        onChange={(ev) => {\n          onChange(ev);\n          if (closeOnSelect) {\n            setOpen(false);\n          }\n        }}\n        onClose={() => setOpen(false)}\n      />\n    </div>\n  );\n};\n\nconst getStyles = () => {\n  return {\n    container: css`\n      position: relative;\n    `,\n    input: css`\n    /* hides the native Calendar picker icon given when using type=date */\n    input[type='date']::-webkit-inner-spin-button,\n    input[type='date']::-webkit-calendar-picker-indicator {\n    display: none;\n    -webkit-appearance: none;\n    `,\n  };\n};\n"],"names":["React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,MAAM,aAAa,CAAC,IAAA,KAAwB,SAAS,IAAI,CAAA,CAAE,OAAO,GAAG,EAAA;AAiB/D,MAAA,mBAAA,GAAsB,CAAC,EAOJ,KAAA;AAPI,EAClC,IAAA,EAAA,GAAA,EAAA,EAAA;AAAA,IAAA,KAAA;AAAA,IACA,OAAA;AAAA,IACA,QAAA;AAAA,IACA,aAAA;AAAA,IACA,WAAc,GAAA,MAAA;AAAA,GA/BhB,GA0BoC,EAM/B,EAAA,IAAA,GAAA,SAAA,CAN+B,EAM/B,EAAA;AAAA,IALH,OAAA;AAAA,IACA,SAAA;AAAA,IACA,UAAA;AAAA,IACA,eAAA;AAAA,IACA,aAAA;AAAA,GAAA,CAAA,CAAA;AAGA,EAAA,MAAM,CAAC,IAAM,EAAA,OAAO,CAAI,GAAAA,cAAA,CAAM,SAAS,KAAK,CAAA,CAAA;AAC5C,EAAM,MAAA,MAAA,GAAS,WAAW,SAAS,CAAA,CAAA;AAEnC,EAAA,uBACGA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,IAAI,WAAW,MAAO,CAAA,SAAA;AAAA,GAAA,kBACpBA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA,cAAA,CAAA;AAAA,IACC,IAAK,EAAA,MAAA;AAAA,IACL,YAAc,EAAA,KAAA;AAAA,IACd,WAAA;AAAA,IACA,KAAO,EAAA,KAAA,GAAQ,UAAW,CAAA,KAAK,CAAI,GAAA,KAAA;AAAA,IACnC,OAAA,EAAS,MAAM,OAAA,CAAQ,IAAI,CAAA;AAAA,IAC3B,QAAA,EAAU,CAAC,EAAsC,KAAA;AAE/C,MAAI,IAAA,EAAA,CAAG,MAAO,CAAA,KAAA,KAAU,EAAI,EAAA;AAC1B,QAAA,QAAA,CAAS,EAAE,CAAA,CAAA;AAAA,OACb;AAAA,KACF;AAAA,IACA,WAAW,MAAO,CAAA,KAAA;AAAA,GACd,EAAA,IAAA,CACN,mBACCA,cAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AAAA,IACC,MAAQ,EAAA,IAAA;AAAA,IACR,KAAA,EAAO,SAAS,OAAO,KAAA,KAAU,WAAW,KAAQ,GAAA,QAAA,GAAW,MAAO,EAAA;AAAA,IACtE,OAAA;AAAA,IACA,QAAA,EAAU,CAAC,EAAO,KAAA;AAChB,MAAA,QAAA,CAAS,EAAE,CAAA,CAAA;AACX,MAAA,IAAI,aAAe,EAAA;AACjB,QAAA,OAAA,CAAQ,KAAK,CAAA,CAAA;AAAA,OACf;AAAA,KACF;AAAA,IACA,OAAA,EAAS,MAAM,OAAA,CAAQ,KAAK,CAAA;AAAA,GAC9B,CACF,CAAA,CAAA;AAEJ,EAAA;AAEA,MAAM,YAAY,MAAM;AACtB,EAAO,OAAA;AAAA,IACL,SAAW,EAAA,GAAA,CAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAGX,KAAO,EAAA,GAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,GAOT,CAAA;AACF,CAAA;;;;"}