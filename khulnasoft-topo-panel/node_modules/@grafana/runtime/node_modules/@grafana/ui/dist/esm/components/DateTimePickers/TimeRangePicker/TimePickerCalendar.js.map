{"version":3,"file":"TimePickerCalendar.js","sources":["../../../../../src/components/DateTimePickers/TimeRangePicker/TimePickerCalendar.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useDialog } from '@react-aria/dialog';\nimport { FocusScope } from '@react-aria/focus';\nimport { OverlayContainer, useOverlay } from '@react-aria/overlays';\nimport React, { FormEvent, memo } from 'react';\n\nimport { DateTime, GrafanaTheme2, TimeZone } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useTheme2 } from '../../../themes';\nimport { getModalStyles } from '../../Modal/getModalStyles';\n\nimport { Body } from './CalendarBody';\nimport { Footer } from './CalendarFooter';\nimport { Header } from './CalendarHeader';\n\nexport const getStyles = (theme: GrafanaTheme2, isReversed = false) => {\n  return {\n    container: css`\n      top: 0px;\n      position: absolute;\n      ${isReversed ? 'left' : 'right'}: 544px;\n      box-shadow: ${theme.shadows.z3};\n      background-color: ${theme.colors.background.primary};\n      z-index: -1;\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: 2px 0 0 2px;\n\n      &:after {\n        display: block;\n        background-color: ${theme.colors.background.primary};\n        width: 19px;\n        height: 100%;\n        content: ${!isReversed ? ' ' : ''};\n        position: absolute;\n        top: 0;\n        right: -19px;\n        border-left: 1px solid ${theme.colors.border.weak};\n      }\n    `,\n    modal: css`\n      box-shadow: ${theme.shadows.z3};\n      left: 50%;\n      position: fixed;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      z-index: ${theme.zIndex.modal};\n    `,\n    content: css`\n      margin: 0 auto;\n      width: 268px;\n    `,\n  };\n};\n\nexport interface TimePickerCalendarProps {\n  isOpen: boolean;\n  from: DateTime;\n  to: DateTime;\n  onClose: () => void;\n  onApply: (e: FormEvent<HTMLButtonElement>) => void;\n  onChange: (from: DateTime, to: DateTime) => void;\n  isFullscreen: boolean;\n  timeZone?: TimeZone;\n  isReversed?: boolean;\n}\n\nconst stopPropagation = (event: React.MouseEvent<HTMLDivElement>) => event.stopPropagation();\n\nfunction TimePickerCalendar(props: TimePickerCalendarProps) {\n  const theme = useTheme2();\n  const { modalBackdrop } = getModalStyles(theme);\n  const styles = getStyles(theme, props.isReversed);\n  const { isOpen, isFullscreen, onClose } = props;\n  const ref = React.createRef<HTMLElement>();\n  const { dialogProps } = useDialog(\n    {\n      'aria-label': selectors.components.TimePicker.calendar.label,\n    },\n    ref\n  );\n  const { overlayProps } = useOverlay(\n    {\n      isDismissable: true,\n      isOpen,\n      onClose,\n    },\n    ref\n  );\n\n  if (!isOpen) {\n    return null;\n  }\n\n  if (isFullscreen) {\n    return (\n      <FocusScope contain restoreFocus autoFocus>\n        <section className={styles.container} onClick={stopPropagation} ref={ref} {...overlayProps} {...dialogProps}>\n          <Header {...props} />\n          <Body {...props} />\n        </section>\n      </FocusScope>\n    );\n  }\n\n  return (\n    <OverlayContainer>\n      <div className={modalBackdrop} onClick={stopPropagation} />\n      <FocusScope contain autoFocus restoreFocus>\n        <section className={styles.modal} onClick={stopPropagation} ref={ref} {...overlayProps} {...dialogProps}>\n          <div className={styles.content} aria-label={selectors.components.TimePicker.calendar.label}>\n            <Header {...props} />\n            <Body {...props} />\n            <Footer {...props} />\n          </div>\n        </section>\n      </FocusScope>\n    </OverlayContainer>\n  );\n}\nexport default memo(TimePickerCalendar);\nTimePickerCalendar.displayName = 'TimePickerCalendar';\n"],"names":["React"],"mappings":"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"}