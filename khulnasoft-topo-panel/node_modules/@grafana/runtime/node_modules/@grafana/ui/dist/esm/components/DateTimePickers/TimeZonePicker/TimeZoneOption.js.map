{"version":3,"file":"TimeZoneOption.js","sources":["../../../../../src/components/DateTimePickers/TimeZonePicker/TimeZoneOption.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { isString } from 'lodash';\nimport React, { PropsWithChildren, RefCallback } from 'react';\n\nimport { GrafanaTheme2, SelectableValue, getTimeZoneInfo } from '@grafana/data';\n\nimport { useTheme2 } from '../../../themes/ThemeContext';\nimport { stylesFactory } from '../../../themes/stylesFactory';\nimport { Icon } from '../../Icon/Icon';\n\nimport { TimeZoneDescription } from './TimeZoneDescription';\nimport { TimeZoneOffset } from './TimeZoneOffset';\nimport { TimeZoneTitle } from './TimeZoneTitle';\n\ninterface Props {\n  isFocused: boolean;\n  isSelected: boolean;\n  innerProps: JSX.IntrinsicElements['div'];\n  innerRef: RefCallback<HTMLDivElement>;\n  data: SelectableZone;\n}\n\nconst offsetClassName = 'tz-utc-offset';\n\nexport interface SelectableZone extends SelectableValue<string> {\n  searchIndex: string;\n}\n\nexport const WideTimeZoneOption: React.FC<PropsWithChildren<Props>> = (props, ref) => {\n  const { children, innerProps, innerRef, data, isSelected, isFocused } = props;\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const timestamp = Date.now();\n  const containerStyles = cx(styles.container, isFocused && styles.containerFocused);\n\n  if (!isString(data.value)) {\n    return null;\n  }\n\n  const timeZoneInfo = getTimeZoneInfo(data.value, timestamp);\n\n  return (\n    <div className={containerStyles} {...innerProps} ref={innerRef} aria-label=\"Select option\">\n      <div className={cx(styles.leftColumn, styles.row)}>\n        <div className={cx(styles.leftColumn, styles.wideRow)}>\n          <TimeZoneTitle title={children} />\n          <div className={styles.spacer} />\n          <TimeZoneDescription info={timeZoneInfo} />\n        </div>\n        <div className={styles.rightColumn}>\n          <TimeZoneOffset\n            /* Use the timeZoneInfo to pass the correct timeZone name,\n               as 'Default' has value '' which defaults to browser timezone */\n            timeZone={timeZoneInfo?.ianaName || data.value}\n            timestamp={timestamp}\n            className={offsetClassName}\n          />\n          {isSelected && (\n            <span>\n              <Icon name=\"check\" />\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const CompactTimeZoneOption: React.FC<React.PropsWithChildren<Props>> = (props, ref) => {\n  const { children, innerProps, innerRef, data, isSelected, isFocused } = props;\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const timestamp = Date.now();\n  const containerStyles = cx(styles.container, isFocused && styles.containerFocused);\n\n  if (!isString(data.value)) {\n    return null;\n  }\n\n  const timeZoneInfo = getTimeZoneInfo(data.value, timestamp);\n\n  return (\n    <div className={containerStyles} {...innerProps} ref={innerRef} aria-label=\"Select option\">\n      <div className={styles.body}>\n        <div className={styles.row}>\n          <div className={styles.leftColumn}>\n            <TimeZoneTitle title={children} />\n          </div>\n          <div className={styles.rightColumn}>\n            {isSelected && (\n              <span>\n                <Icon name=\"check\" />\n              </span>\n            )}\n          </div>\n        </div>\n        <div className={styles.row}>\n          <div className={styles.leftColumn}>\n            <TimeZoneDescription info={timeZoneInfo} />\n          </div>\n          <div className={styles.rightColumn}>\n            <TimeZoneOffset\n              timestamp={timestamp}\n              /* Use the timeZoneInfo to pass the correct timeZone name,\n                 as 'Default' has value '' which defaults to browser timezone */\n              timeZone={timeZoneInfo?.ianaName || data.value}\n              className={offsetClassName}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      display: flex;\n      align-items: center;\n      flex-direction: row;\n      flex-shrink: 0;\n      white-space: nowrap;\n      cursor: pointer;\n      padding: 6px 8px 4px;\n\n      &:hover {\n        background: ${theme.colors.action.hover};\n      }\n    `,\n    containerFocused: css`\n      background: ${theme.colors.action.hover};\n    `,\n    body: css`\n      display: flex;\n      font-weight: ${theme.typography.fontWeightMedium};\n      flex-direction: column;\n      flex-grow: 1;\n    `,\n    row: css`\n      display: flex;\n      flex-direction: row;\n    `,\n    leftColumn: css`\n      flex-grow: 1;\n      text-overflow: ellipsis;\n    `,\n    rightColumn: css`\n      justify-content: flex-end;\n      align-items: center;\n    `,\n    wideRow: css`\n      display: flex;\n      flex-direction: row;\n      align-items: baseline;\n    `,\n    spacer: css`\n      margin-left: 6px;\n    `,\n  };\n});\n"],"names":["React"],"mappings":"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"}