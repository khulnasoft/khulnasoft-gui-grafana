{"version":3,"file":"ButtonSelect.js","sources":["../../../../src/components/Dropdown/ButtonSelect.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useButton } from '@react-aria/button';\nimport { FocusScope } from '@react-aria/focus';\nimport { useMenuTrigger } from '@react-aria/menu';\nimport { useMenuTriggerState } from '@react-stately/menu';\nimport React, { HTMLAttributes } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { ButtonGroup } from '../Button';\nimport { ClickOutsideWrapper } from '../ClickOutsideWrapper/ClickOutsideWrapper';\nimport { Menu } from '../Menu/Menu';\nimport { MenuItem } from '../Menu/MenuItem';\nimport { ToolbarButton, ToolbarButtonVariant } from '../ToolbarButton';\nimport { PopoverContent } from '../Tooltip';\n\nexport interface Props<T> extends HTMLAttributes<HTMLButtonElement> {\n  className?: string;\n  options: Array<SelectableValue<T>>;\n  value?: SelectableValue<T>;\n  onChange: (item: SelectableValue<T>) => void;\n  tooltipContent?: PopoverContent;\n  narrow?: boolean;\n  variant?: ToolbarButtonVariant;\n}\n\n/**\n * @internal\n * A temporary component until we have a proper dropdown component\n */\nconst ButtonSelectComponent = <T,>(props: Props<T>) => {\n  const { className, options, value, onChange, narrow, variant, ...restProps } = props;\n  const styles = useStyles2(getStyles);\n  const state = useMenuTriggerState({});\n\n  const ref = React.useRef(null);\n  const { menuTriggerProps, menuProps } = useMenuTrigger({}, state, ref);\n  const { buttonProps } = useButton(menuTriggerProps, ref);\n\n  const onChangeInternal = (item: SelectableValue<T>) => {\n    onChange(item);\n    state.close();\n  };\n\n  return (\n    <ButtonGroup className={styles.wrapper}>\n      <ToolbarButton\n        className={className}\n        isOpen={state.isOpen}\n        narrow={narrow}\n        variant={variant}\n        ref={ref}\n        {...buttonProps}\n        {...restProps}\n      >\n        {value?.label || value?.value}\n      </ToolbarButton>\n      {state.isOpen && (\n        <div className={styles.menuWrapper}>\n          <ClickOutsideWrapper onClick={state.close} parent={document} includeButtonPress={false}>\n            <FocusScope contain autoFocus restoreFocus>\n              {/*\n                tabIndex=-1 is needed here to support highlighting text within the menu when using FocusScope\n                see https://github.com/adobe/react-spectrum/issues/1604#issuecomment-781574668\n              */}\n              <Menu tabIndex={-1} onClose={state.close} {...menuProps}>\n                {options.map((item) => (\n                  <MenuItem\n                    key={`${item.value}`}\n                    label={(item.label || item.value) as string}\n                    onClick={() => onChangeInternal(item)}\n                    active={item.value === value?.value}\n                    ariaChecked={item.value === value?.value}\n                    ariaLabel={item.ariaLabel || item.label}\n                    role=\"menuitemradio\"\n                  />\n                ))}\n              </Menu>\n            </FocusScope>\n          </ClickOutsideWrapper>\n        </div>\n      )}\n    </ButtonGroup>\n  );\n};\n\nButtonSelectComponent.displayName = 'ButtonSelect';\n\nexport const ButtonSelect = React.memo(ButtonSelectComponent) as typeof ButtonSelectComponent;\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css`\n      position: relative;\n      display: inline-flex;\n    `,\n    menuWrapper: css`\n      position: absolute;\n      z-index: ${theme.zIndex.dropdown};\n      top: ${theme.spacing(4)};\n      right: 0;\n    `,\n  };\n};\n"],"names":["React"],"mappings":"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"}