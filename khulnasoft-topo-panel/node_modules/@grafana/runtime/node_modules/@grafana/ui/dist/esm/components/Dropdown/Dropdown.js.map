{"version":3,"file":"Dropdown.js","sources":["../../../../src/components/Dropdown/Dropdown.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { FocusScope } from '@react-aria/focus';\nimport React, { useRef, useState } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\nimport { CSSTransition } from 'react-transition-group';\n\nimport { ReactUtils } from '../../utils';\nimport { Portal } from '../Portal/Portal';\nimport { TooltipPlacement } from '../Tooltip/types';\n\nexport interface Props {\n  overlay: React.ReactElement | (() => React.ReactElement);\n  placement?: TooltipPlacement;\n  children: React.ReactElement | ((isOpen: boolean) => React.ReactElement);\n}\n\nexport const Dropdown = React.memo(({ children, overlay, placement }: Props) => {\n  const [show, setShow] = useState(false);\n  const transitionRef = useRef(null);\n\n  const { getArrowProps, getTooltipProps, setTooltipRef, setTriggerRef, visible } = usePopperTooltip({\n    visible: show,\n    placement: placement,\n    onVisibleChange: setShow,\n    interactive: true,\n    delayHide: 0,\n    delayShow: 0,\n    offset: [0, 8],\n    trigger: ['click'],\n  });\n\n  const animationDuration = 150;\n  const animationStyles = getStyles(animationDuration);\n\n  const onOverlayClicked = () => {\n    setShow(false);\n  };\n\n  return (\n    <>\n      {React.cloneElement(typeof children === 'function' ? children(visible) : children, {\n        ref: setTriggerRef,\n      })}\n      {visible && (\n        <Portal>\n          <FocusScope autoFocus>\n            <div ref={setTooltipRef} {...getTooltipProps()} onClick={onOverlayClicked}>\n              <div {...getArrowProps({ className: 'tooltip-arrow' })} />\n              <CSSTransition\n                nodeRef={transitionRef}\n                appear={true}\n                in={true}\n                timeout={{ appear: animationDuration, exit: 0, enter: 0 }}\n                classNames={animationStyles}\n              >\n                <div ref={transitionRef}>{ReactUtils.renderOrCallToRender(overlay)}</div>\n              </CSSTransition>\n            </div>\n          </FocusScope>\n        </Portal>\n      )}\n    </>\n  );\n});\n\nDropdown.displayName = 'Dropdown';\n\nconst getStyles = (duration: number) => {\n  return {\n    appear: css`\n      opacity: 0;\n      position: relative;\n      transform: scaleY(0.5);\n      transform-origin: top;\n    `,\n    appearActive: css`\n      opacity: 1;\n      transform: scaleY(1);\n      transition: transform ${duration}ms cubic-bezier(0.2, 0, 0.2, 1),\n        opacity ${duration}ms cubic-bezier(0.2, 0, 0.2, 1);\n    `,\n  };\n};\n"],"names":["React","ReactUtils.renderOrCallToRender"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBa,MAAA,QAAA,GAAWA,eAAM,IAAK,CAAA,CAAC,EAAE,QAAU,EAAA,OAAA,EAAS,WAAuB,KAAA;AAC9E,EAAA,MAAM,CAAC,IAAA,EAAM,OAAO,CAAA,GAAI,SAAS,KAAK,CAAA,CAAA;AACtC,EAAM,MAAA,aAAA,GAAgB,OAAO,IAAI,CAAA,CAAA;AAEjC,EAAA,MAAM,EAAE,aAAe,EAAA,eAAA,EAAiB,eAAe,aAAe,EAAA,OAAA,KAAY,gBAAiB,CAAA;AAAA,IACjG,OAAS,EAAA,IAAA;AAAA,IACT,SAAA;AAAA,IACA,eAAiB,EAAA,OAAA;AAAA,IACjB,WAAa,EAAA,IAAA;AAAA,IACb,SAAW,EAAA,CAAA;AAAA,IACX,SAAW,EAAA,CAAA;AAAA,IACX,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAC,CAAA;AAAA,IACb,OAAA,EAAS,CAAC,OAAO,CAAA;AAAA,GAClB,CAAA,CAAA;AAED,EAAA,MAAM,iBAAoB,GAAA,GAAA,CAAA;AAC1B,EAAM,MAAA,eAAA,GAAkB,UAAU,iBAAiB,CAAA,CAAA;AAEnD,EAAA,MAAM,mBAAmB,MAAM;AAC7B,IAAA,OAAA,CAAQ,KAAK,CAAA,CAAA;AAAA,GACf,CAAA;AAEA,EACE,uBAAAA,cAAA,CAAA,aAAA,CAAAA,cAAA,CAAA,QAAA,EAAA,IAAA,EACGA,eAAM,YAAa,CAAA,OAAO,aAAa,UAAa,GAAA,QAAA,CAAS,OAAO,CAAA,GAAI,QAAU,EAAA;AAAA,IACjF,GAAK,EAAA,aAAA;AAAA,GACN,CAAA,EACA,OACC,oBAAAA,cAAA,CAAA,aAAA,CAAC,8BACEA,cAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AAAA,IAAW,SAAS,EAAA,IAAA;AAAA,GAAA,kBAClBA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA,aAAA,CAAA,cAAA,CAAA;AAAA,IAAI,GAAK,EAAA,aAAA;AAAA,GAAA,EAAmB,iBAA5B,CAAA,EAAA;AAAA,IAA+C,OAAS,EAAA,gBAAA;AAAA,GACvD,CAAA,kBAAAA,cAAA,CAAA,aAAA,CAAC,0BAAQ,aAAc,CAAA,EAAE,WAAW,eAAgB,EAAC,CAAG,CAAA,CAAA,kBACvDA,cAAA,CAAA,aAAA,CAAA,aAAA,EAAA;AAAA,IACC,OAAS,EAAA,aAAA;AAAA,IACT,MAAQ,EAAA,IAAA;AAAA,IACR,EAAI,EAAA,IAAA;AAAA,IACJ,SAAS,EAAE,MAAA,EAAQ,mBAAmB,IAAM,EAAA,CAAA,EAAG,OAAO,CAAE,EAAA;AAAA,IACxD,UAAY,EAAA,eAAA;AAAA,GAAA,kBAEXA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,IAAI,GAAK,EAAA,aAAA;AAAA,GAAgB,EAAAC,qBAAgC,OAAO,CAAE,CACrE,CACF,CACF,CACF,CAEJ,CAAA,CAAA;AAEJ,CAAC,EAAA;AAED,QAAA,CAAS,WAAc,GAAA,UAAA,CAAA;AAEvB,MAAM,SAAA,GAAY,CAAC,QAAqB,KAAA;AACtC,EAAO,OAAA;AAAA,IACL,MAAQ,EAAA,GAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA;AAAA,IAMR,YAAc,EAAA,GAAA,CAAA;AAAA;AAAA;AAAA,4BAGY,EAAA,QAAA,CAAA;AAAA,gBACZ,EAAA,QAAA,CAAA;AAAA,IAAA,CAAA;AAAA,GAEhB,CAAA;AACF,CAAA;;;;"}