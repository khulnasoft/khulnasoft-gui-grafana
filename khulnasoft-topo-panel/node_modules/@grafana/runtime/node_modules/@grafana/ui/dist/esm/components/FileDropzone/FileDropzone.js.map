{"version":3,"file":"FileDropzone.js","sources":["../../../../src/components/FileDropzone/FileDropzone.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { isString, uniqueId } from 'lodash';\nimport React, { ReactNode, useCallback, useState } from 'react';\nimport { Accept, DropEvent, DropzoneOptions, FileRejection, useDropzone } from 'react-dropzone';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useTheme2 } from '../../themes';\nimport { Alert } from '../Alert/Alert';\nimport { Icon } from '../Icon/Icon';\n\nimport { FileListItem } from './FileListItem';\n\ntype BackwardsCompatibleDropzoneOptions = Omit<DropzoneOptions, 'accept'> & {\n  // For backward compatibility we are still allowing the old `string | string[]` format for adding accepted file types (format changed in v13.0.0)\n  accept?: string | string[] | Accept;\n};\n\nexport interface FileDropzoneProps {\n  /**\n   * Use the children property to have custom dropzone view.\n   */\n  children?: ReactNode;\n  /**\n   * Use this property to override the default behaviour for the react-dropzone options.\n   * @default {\n   *  maxSize: Infinity,\n   *  minSize: 0,\n   *  multiple: true,\n   *  useFsAccessApi: false,\n   *  maxFiles: 0,\n   * }\n   */\n  options?: BackwardsCompatibleDropzoneOptions;\n  /**\n   * Use this to change the FileReader's read.\n   */\n  readAs?: 'readAsArrayBuffer' | 'readAsText' | 'readAsBinaryString' | 'readAsDataURL';\n  /**\n   * Use the onLoad function to get the result from FileReader.\n   */\n  onLoad?: (result: string | ArrayBuffer | null) => void;\n  /**\n   * The fileListRenderer property can be used to overwrite the list of files. To not to show\n   * any list return null in the function.\n   */\n  fileListRenderer?: (file: DropzoneFile, removeFile: (file: DropzoneFile) => void) => ReactNode;\n  onFileRemove?: (file: DropzoneFile) => void;\n}\n\nexport interface DropzoneFile {\n  file: File;\n  id: string;\n  error: DOMException | null;\n  progress?: number;\n  abortUpload?: () => void;\n  retryUpload?: () => void;\n}\n\nexport function FileDropzone({ options, children, readAs, onLoad, fileListRenderer, onFileRemove }: FileDropzoneProps) {\n  const [files, setFiles] = useState<DropzoneFile[]>([]);\n  const [errorMessages, setErrorMessages] = useState<string[]>([]);\n\n  const setFileProperty = useCallback(\n    (customFile: DropzoneFile, action: (customFileToModify: DropzoneFile) => void) => {\n      setFiles((oldFiles) => {\n        return oldFiles.map((oldFile) => {\n          if (oldFile.id === customFile.id) {\n            action(oldFile);\n            return oldFile;\n          }\n          return oldFile;\n        });\n      });\n    },\n    []\n  );\n\n  const onDrop = useCallback(\n    (acceptedFiles: File[], rejectedFiles: FileRejection[], event: DropEvent) => {\n      let customFiles = acceptedFiles.map(mapToCustomFile);\n      if (options?.multiple === false) {\n        setFiles(customFiles);\n      } else {\n        setFiles((oldFiles) => [...oldFiles, ...customFiles]);\n      }\n\n      setErrors(rejectedFiles);\n\n      if (options?.onDrop) {\n        options.onDrop(acceptedFiles, rejectedFiles, event);\n      } else {\n        for (const customFile of customFiles) {\n          const reader = new FileReader();\n\n          const read = () => {\n            if (readAs) {\n              reader[readAs](customFile.file);\n            } else {\n              reader.readAsText(customFile.file);\n            }\n          };\n\n          // Set abort FileReader\n          setFileProperty(customFile, (fileToModify) => {\n            fileToModify.abortUpload = () => {\n              reader.abort();\n            };\n            fileToModify.retryUpload = () => {\n              setFileProperty(customFile, (fileToModify) => {\n                fileToModify.error = null;\n                fileToModify.progress = undefined;\n              });\n              read();\n            };\n          });\n\n          reader.onabort = () => {\n            setFileProperty(customFile, (fileToModify) => {\n              fileToModify.error = new DOMException('Aborted');\n            });\n          };\n\n          reader.onprogress = (event) => {\n            setFileProperty(customFile, (fileToModify) => {\n              fileToModify.progress = event.loaded;\n            });\n          };\n\n          reader.onload = () => {\n            onLoad?.(reader.result);\n          };\n\n          reader.onerror = () => {\n            setFileProperty(customFile, (fileToModify) => {\n              fileToModify.error = reader.error;\n            });\n          };\n\n          read();\n        }\n      }\n    },\n    [onLoad, options, readAs, setFileProperty]\n  );\n\n  const removeFile = (file: DropzoneFile) => {\n    const newFiles = files.filter((f) => file.id !== f.id);\n    setFiles(newFiles);\n    onFileRemove?.(file);\n  };\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    ...options,\n    useFsAccessApi: false,\n    onDrop,\n    accept: transformAcceptToNewFormat(options?.accept),\n  });\n  const theme = useTheme2();\n  const styles = getStyles(theme, isDragActive);\n  const fileList = files.map((file) => {\n    if (fileListRenderer) {\n      return fileListRenderer(file, removeFile);\n    }\n    return <FileListItem key={file.id} file={file} removeFile={removeFile} />;\n  });\n\n  const setErrors = (rejectedFiles: FileRejection[]) => {\n    let errors: string[] = [];\n    rejectedFiles.map((rejectedFile) => {\n      rejectedFile.errors.map((error) => {\n        if (errors.indexOf(error.message) === -1) {\n          errors.push(error.message);\n        }\n      });\n    });\n\n    setErrorMessages(errors);\n  };\n\n  const getErrorMessages = () => {\n    return (\n      <div className={styles.errorAlert}>\n        <Alert title=\"Upload failed\" severity=\"error\" onRemove={clearAlert}>\n          {errorMessages.map((error) => {\n            return <div key={error}>{error}</div>;\n          })}\n        </Alert>\n      </div>\n    );\n  };\n\n  const clearAlert = () => {\n    setErrorMessages([]);\n  };\n\n  return (\n    <div className={styles.container}>\n      <div data-testid=\"dropzone\" {...getRootProps({ className: styles.dropzone })}>\n        <input {...getInputProps()} />\n        {children ?? <FileDropzoneDefaultChildren primaryText={getPrimaryText(files, options)} />}\n      </div>\n      {errorMessages.length > 0 && getErrorMessages()}\n      {options?.accept && (\n        <small className={cx(styles.small, styles.acceptMargin)}>{getAcceptedFileTypeText(options.accept)}</small>\n      )}\n      {fileList}\n    </div>\n  );\n}\n\nexport function getMimeTypeByExtension(ext: string) {\n  if (['txt', 'json', 'csv', 'xls', 'yml'].some((e) => ext.match(e))) {\n    return 'text/plain';\n  }\n\n  return 'application/octet-stream';\n}\n\nexport function transformAcceptToNewFormat(accept?: string | string[] | Accept): Accept | undefined {\n  if (isString(accept)) {\n    return {\n      [getMimeTypeByExtension(accept)]: [accept],\n    };\n  }\n\n  if (Array.isArray(accept)) {\n    return accept.reduce((prev: Record<string, string[]>, current) => {\n      const mime = getMimeTypeByExtension(current);\n\n      prev[mime] = prev[mime] ? [...prev[mime], current] : [current];\n\n      return prev;\n    }, {});\n  }\n\n  return accept;\n}\n\nexport function FileDropzoneDefaultChildren({\n  primaryText = 'Upload file',\n  secondaryText = 'Drag and drop here or browse',\n}) {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  return (\n    <div className={styles.iconWrapper}>\n      <Icon name=\"upload\" size=\"xxl\" />\n      <h3>{primaryText}</h3>\n      <small className={styles.small}>{secondaryText}</small>\n    </div>\n  );\n}\nfunction getPrimaryText(files: DropzoneFile[], options?: BackwardsCompatibleDropzoneOptions) {\n  if (options?.multiple === undefined || options?.multiple) {\n    return 'Upload file';\n  }\n  return files.length ? 'Replace file' : 'Upload file';\n}\n\nfunction getAcceptedFileTypeText(accept: string | string[] | Accept) {\n  if (isString(accept)) {\n    return `Accepted file type: ${accept}`;\n  }\n\n  if (Array.isArray(accept)) {\n    return `Accepted file types: ${accept.join(', ')}`;\n  }\n\n  // react-dropzone has updated the type of the \"accept\" parameter since v13.0.0:\n  // https://github.com/react-dropzone/react-dropzone/blob/master/src/index.js#L95\n  return `Accepted file types: ${Object.values(accept).flat().join(', ')}`;\n}\n\nfunction mapToCustomFile(file: File): DropzoneFile {\n  return {\n    id: uniqueId('file'),\n    file,\n    error: null,\n  };\n}\n\nfunction getStyles(theme: GrafanaTheme2, isDragActive?: boolean) {\n  return {\n    container: css`\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n    `,\n    dropzone: css`\n      display: flex;\n      flex: 1;\n      flex-direction: column;\n      align-items: center;\n      padding: ${theme.spacing(6)};\n      border-radius: 2px;\n      border: 2px dashed ${theme.colors.border.medium};\n      background-color: ${isDragActive ? theme.colors.background.secondary : theme.colors.background.primary};\n      cursor: pointer;\n    `,\n    iconWrapper: css`\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    `,\n    acceptMargin: css`\n      margin: ${theme.spacing(2, 0, 1)};\n    `,\n    small: css`\n      color: ${theme.colors.text.secondary};\n    `,\n    errorAlert: css`\n      padding-top: 10px;\n    `,\n  };\n}\n"],"names":["fileToModify","event","React"],"mappings":"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"}