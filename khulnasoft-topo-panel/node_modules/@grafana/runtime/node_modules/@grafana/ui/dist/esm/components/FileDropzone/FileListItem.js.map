{"version":3,"file":"FileListItem.js","sources":["../../../../src/components/FileDropzone/FileListItem.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { formattedValueToString, getValueFormat, GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes';\nimport { trimFileName } from '../../utils/file';\nimport { Button } from '../Button';\nimport { Icon } from '../Icon/Icon';\nimport { IconButton } from '../IconButton/IconButton';\n\nimport { DropzoneFile } from './FileDropzone';\n\nexport const REMOVE_FILE = 'Remove file';\nexport interface FileListItemProps {\n  file: DropzoneFile;\n  removeFile?: (file: DropzoneFile) => void;\n}\n\nexport function FileListItem({ file: customFile, removeFile }: FileListItemProps) {\n  const styles = useStyles2(getStyles);\n  const { file, progress, error, abortUpload, retryUpload } = customFile;\n\n  const renderRightSide = () => {\n    if (error) {\n      return (\n        <>\n          <span className={styles.error}>{error.message}</span>\n          {retryUpload && (\n            <IconButton\n              type=\"button\"\n              aria-label=\"Retry\"\n              name=\"sync\"\n              tooltip=\"Retry\"\n              tooltipPlacement=\"top\"\n              onClick={retryUpload}\n            />\n          )}\n          {removeFile && (\n            <IconButton\n              className={retryUpload ? styles.marginLeft : ''}\n              type=\"button\"\n              name=\"trash-alt\"\n              onClick={() => removeFile(customFile)}\n              tooltip={REMOVE_FILE}\n              aria-label={REMOVE_FILE}\n            />\n          )}\n        </>\n      );\n    }\n\n    if (progress && file.size > progress) {\n      return (\n        <>\n          <progress className={styles.progressBar} max={file.size} value={progress} />\n          <span className={styles.paddingLeft}>{Math.round((progress / file.size) * 100)}%</span>\n          {abortUpload && (\n            <Button variant=\"secondary\" type=\"button\" fill=\"text\" onClick={abortUpload}>\n              Cancel upload\n            </Button>\n          )}\n        </>\n      );\n    }\n    return (\n      removeFile && (\n        <IconButton\n          name=\"trash-alt\"\n          onClick={() => removeFile(customFile)}\n          tooltip={REMOVE_FILE}\n          aria-label={REMOVE_FILE}\n          type=\"button\"\n          tooltipPlacement=\"top\"\n        />\n      )\n    );\n  };\n\n  const valueFormat = getValueFormat('decbytes')(file.size);\n\n  return (\n    <div className={styles.fileListContainer}>\n      <span className={styles.fileNameWrapper}>\n        <Icon name=\"file-blank\" size=\"lg\" aria-hidden={true} />\n        <span className={styles.padding}>{trimFileName(file.name)}</span>\n        <span>{formattedValueToString(valueFormat)}</span>\n      </span>\n\n      <div className={styles.fileNameWrapper}>{renderRightSide()}</div>\n    </div>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    fileListContainer: css`\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      justify-content: space-between;\n      padding: ${theme.spacing(2)};\n      border: 1px dashed ${theme.colors.border.medium};\n      background-color: ${theme.colors.background.secondary};\n      margin-top: ${theme.spacing(1)};\n    `,\n    fileNameWrapper: css`\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    `,\n    padding: css`\n      padding: ${theme.spacing(0, 1)};\n    `,\n    paddingLeft: css`\n      padding-left: ${theme.spacing(2)};\n    `,\n    marginLeft: css`\n      margin-left: ${theme.spacing(1)};\n    `,\n    error: css`\n      padding-right: ${theme.spacing(2)};\n      color: ${theme.colors.error.text};\n    `,\n    progressBar: css`\n      border-radius: ${theme.spacing(1)};\n      height: 4px;\n      ::-webkit-progress-bar {\n        background-color: ${theme.colors.border.weak};\n        border-radius: ${theme.spacing(1)};\n      }\n      ::-webkit-progress-value {\n        background-color: ${theme.colors.primary.main};\n        border-radius: ${theme.spacing(1)};\n      }\n    `,\n  };\n}\n"],"names":["React"],"mappings":"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"}