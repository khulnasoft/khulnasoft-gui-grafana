{"version":3,"file":"Field.js","sources":["../../../../src/components/Forms/Field.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { HTMLAttributes } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { stylesFactory, useTheme2 } from '../../themes';\nimport { getChildId } from '../../utils/reactUtils';\n\nimport { FieldValidationMessage } from './FieldValidationMessage';\nimport { Label } from './Label';\n\nexport interface FieldProps extends HTMLAttributes<HTMLDivElement> {\n  /** Form input element, i.e Input or Switch */\n  children: React.ReactElement;\n  /** Label for the field */\n  label?: React.ReactNode;\n  /** Description of the field */\n  description?: React.ReactNode;\n  /** Indicates if field is in invalid state */\n  invalid?: boolean;\n  /** Indicates if field is in loading state */\n  loading?: boolean;\n  /** Indicates if field is disabled */\n  disabled?: boolean;\n  /** Indicates if field is required */\n  required?: boolean;\n  /** Error message to display */\n  error?: React.ReactNode;\n  /** Indicates horizontal layout of the field */\n  horizontal?: boolean;\n  /** make validation message overflow horizontally. Prevents pushing out adjacent inline components */\n  validationMessageHorizontalOverflow?: boolean;\n\n  className?: string;\n  /**\n   *  A unique id that associates the label of the Field component with the control with the unique id.\n   *  If the `htmlFor` property is missing the `htmlFor` will be inferred from the `id` or `inputId` property of the first child.\n   *  https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label#attr-for\n   */\n  htmlFor?: string;\n}\n\nexport const getFieldStyles = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    field: css`\n      display: flex;\n      flex-direction: column;\n      margin-bottom: ${theme.spacing(2)};\n    `,\n    fieldHorizontal: css`\n      flex-direction: row;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    fieldValidationWrapper: css`\n      margin-top: ${theme.spacing(0.5)};\n    `,\n    fieldValidationWrapperHorizontal: css`\n      flex: 1 1 100%;\n    `,\n    validationMessageHorizontalOverflow: css`\n      width: 0;\n      overflow-x: visible;\n\n      & > * {\n        white-space: nowrap;\n      }\n    `,\n  };\n});\n\nexport const Field: React.FC<FieldProps> = ({\n  label,\n  description,\n  horizontal,\n  invalid,\n  loading,\n  disabled,\n  required,\n  error,\n  children,\n  className,\n  validationMessageHorizontalOverflow,\n  htmlFor,\n  ...otherProps\n}) => {\n  const theme = useTheme2();\n  const styles = getFieldStyles(theme);\n  const inputId = htmlFor ?? getChildId(children);\n\n  const labelElement =\n    typeof label === 'string' ? (\n      <Label htmlFor={inputId} description={description}>\n        {`${label}${required ? ' *' : ''}`}\n      </Label>\n    ) : (\n      label\n    );\n\n  const childProps = deleteUndefinedProps({ invalid, disabled, loading });\n  return (\n    <div className={cx(styles.field, horizontal && styles.fieldHorizontal, className)} {...otherProps}>\n      {labelElement}\n      <div>\n        {React.cloneElement(children, childProps)}\n        {invalid && error && !horizontal && (\n          <div\n            className={cx(styles.fieldValidationWrapper, {\n              [styles.validationMessageHorizontalOverflow]: !!validationMessageHorizontalOverflow,\n            })}\n          >\n            <FieldValidationMessage>{error}</FieldValidationMessage>\n          </div>\n        )}\n      </div>\n\n      {invalid && error && horizontal && (\n        <div\n          className={cx(styles.fieldValidationWrapper, styles.fieldValidationWrapperHorizontal, {\n            [styles.validationMessageHorizontalOverflow]: !!validationMessageHorizontalOverflow,\n          })}\n        >\n          <FieldValidationMessage>{error}</FieldValidationMessage>\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction deleteUndefinedProps<T extends Object>(obj: T): Partial<T> {\n  for (const key in obj) {\n    if (obj[key] === undefined) {\n      delete obj[key];\n    }\n  }\n\n  return obj;\n}\n"],"names":["React"],"mappings":"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"}