{"version":3,"file":"PageToolbar.js","sources":["../../../../src/components/PageLayout/PageToolbar.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { FC, ReactNode } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { Link, ToolbarButtonRow } from '..';\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { getFocusStyles } from '../../themes/mixins';\nimport { IconName } from '../../types';\nimport { Icon } from '../Icon/Icon';\nimport { IconButton } from '../IconButton/IconButton';\n\nexport interface Props {\n  pageIcon?: IconName;\n  title?: string;\n  section?: string;\n  parent?: string;\n  onGoBack?: () => void;\n  titleHref?: string;\n  parentHref?: string;\n  leftItems?: ReactNode[];\n  children?: ReactNode;\n  className?: string;\n  isFullscreen?: boolean;\n  'aria-label'?: string;\n}\n\n/** @alpha */\nexport const PageToolbar: FC<Props> = React.memo(\n  ({\n    title,\n    section,\n    parent,\n    pageIcon,\n    onGoBack,\n    children,\n    titleHref,\n    parentHref,\n    leftItems,\n    isFullscreen,\n    className,\n    /** main nav-container aria-label **/\n    'aria-label': ariaLabel,\n  }) => {\n    const styles = useStyles2(getStyles);\n\n    /**\n     * .page-toolbar css class is used for some legacy css view modes (TV/Kiosk) and\n     * media queries for mobile view when toolbar needs left padding to make room\n     * for mobile menu icon. This logic hopefylly can be changed when we move to a full react\n     * app and change how the app side menu & mobile menu is rendered.\n     */\n    const mainStyle = cx(\n      'page-toolbar',\n      styles.toolbar,\n      {\n        ['page-toolbar--fullscreen']: isFullscreen,\n      },\n      className\n    );\n\n    const titleEl = (\n      <>\n        <span className={styles.truncateText}>{title}</span>\n        {section && <span className={styles.pre}> / {section}</span>}\n      </>\n    );\n\n    return (\n      <nav className={mainStyle} aria-label={ariaLabel}>\n        <div className={styles.leftWrapper}>\n          {pageIcon && !onGoBack && (\n            <div className={styles.pageIcon}>\n              <Icon name={pageIcon} size=\"lg\" aria-hidden />\n            </div>\n          )}\n          {onGoBack && (\n            <div className={styles.pageIcon}>\n              <IconButton\n                name=\"arrow-left\"\n                tooltip=\"Go back (Esc)\"\n                tooltipPlacement=\"bottom\"\n                size=\"xxl\"\n                aria-label={selectors.components.BackButton.backArrow}\n                onClick={onGoBack}\n              />\n            </div>\n          )}\n          <nav aria-label=\"Search links\" className={styles.navElement}>\n            {parent && parentHref && (\n              <>\n                <Link\n                  aria-label={`Search dashboard in the ${parent} folder`}\n                  className={cx(styles.titleText, styles.parentLink, styles.titleLink, styles.truncateText)}\n                  href={parentHref}\n                >\n                  {parent} <span className={styles.parentIcon}></span>\n                </Link>\n                {titleHref && (\n                  <span className={cx(styles.titleText, styles.titleDivider)} aria-hidden>\n                    /\n                  </span>\n                )}\n              </>\n            )}\n\n            {(title || Boolean(leftItems?.length)) && (\n              <div className={styles.titleWrapper}>\n                {title && (\n                  <h1 className={styles.h1Styles}>\n                    {titleHref ? (\n                      <Link\n                        aria-label=\"Search dashboard by name\"\n                        className={cx(styles.titleText, styles.titleLink)}\n                        href={titleHref}\n                      >\n                        {titleEl}\n                      </Link>\n                    ) : (\n                      <div className={styles.titleText}>{titleEl}</div>\n                    )}\n                  </h1>\n                )}\n\n                {leftItems?.map((child, index) => (\n                  <div className={styles.leftActionItem} key={index}>\n                    {child}\n                  </div>\n                ))}\n              </div>\n            )}\n          </nav>\n        </div>\n        <ToolbarButtonRow alignment=\"right\">{React.Children.toArray(children).filter(Boolean)}</ToolbarButtonRow>\n      </nav>\n    );\n  }\n);\n\nPageToolbar.displayName = 'PageToolbar';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const { spacing, typography } = theme;\n\n  const focusStyle = getFocusStyles(theme);\n\n  return {\n    pre: css`\n      white-space: pre;\n    `,\n    toolbar: css`\n      align-items: center;\n      background: ${theme.colors.background.canvas};\n      display: flex;\n      gap: ${theme.spacing(2)};\n      justify-content: space-between;\n      padding: ${theme.spacing(1.5, 2)};\n    `,\n    leftWrapper: css`\n      display: flex;\n      flex-wrap: nowrap;\n      max-width: 70%;\n    `,\n    pageIcon: css`\n      display: none;\n      ${theme.breakpoints.up('sm')} {\n        display: flex;\n        padding-right: ${theme.spacing(1)};\n        align-items: center;\n      }\n    `,\n    truncateText: css`\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    `,\n    titleWrapper: css`\n      display: flex;\n      margin: 0;\n      min-width: 0;\n    `,\n    navElement: css`\n      display: flex;\n      align-items: center;\n      min-width: 0;\n    `,\n    h1Styles: css`\n      margin: 0;\n      line-height: inherit;\n      flex-grow: 1;\n      min-width: 0;\n    `,\n    parentIcon: css`\n      margin-left: ${theme.spacing(0.5)};\n    `,\n    titleText: css`\n      display: flex;\n      font-size: ${typography.size.lg};\n      margin: 0;\n      max-width: 300px;\n      border-radius: 2px;\n    `,\n    titleLink: css`\n      &:focus-visible {\n        ${focusStyle}\n      }\n    `,\n    titleDivider: css`\n      padding: ${spacing(0, 0.5, 0, 0.5)};\n      display: none;\n      ${theme.breakpoints.up('md')} {\n        display: unset;\n      }\n    `,\n    parentLink: css`\n      display: none;\n      ${theme.breakpoints.up('md')} {\n        display: unset;\n        flex: 1;\n      }\n    `,\n    leftActionItem: css`\n      display: none;\n      ${theme.breakpoints.up('md')} {\n        align-items: center;\n        display: flex;\n        padding-left: ${spacing(0.5)};\n      }\n    `,\n  };\n};\n"],"names":["React"],"mappings":"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"}