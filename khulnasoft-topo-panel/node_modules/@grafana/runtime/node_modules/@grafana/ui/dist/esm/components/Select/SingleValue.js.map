{"version":3,"file":"SingleValue.js","sources":["../../../../src/components/Select/SingleValue.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React from 'react';\nimport { components, GroupBase, SingleValueProps } from 'react-select';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes';\nimport { useDelayedSwitch } from '../../utils/useDelayedSwitch';\nimport { Spinner } from '../Spinner/Spinner';\nimport { FadeTransition } from '../transitions/FadeTransition';\nimport { SlideOutTransition } from '../transitions/SlideOutTransition';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const singleValue = css`\n    label: singleValue;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    box-sizing: border-box;\n    max-width: 100%;\n    grid-area: 1 / 1 / 2 / 3;\n  `;\n\n  const spinnerWrapper = css`\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-right: 10px;\n    position: relative;\n    vertical-align: middle;\n    overflow: hidden;\n  `;\n\n  const spinnerIcon = css`\n    width: 100%;\n    height: 100%;\n    position: absolute;\n  `;\n\n  const disabled = css`\n    color: ${theme.colors.text.disabled};\n  `;\n\n  const isOpen = css`\n    color: ${theme.colors.text.disabled};\n  `;\n\n  return { singleValue, spinnerWrapper, spinnerIcon, disabled, isOpen };\n};\n\ntype StylesType = ReturnType<typeof getStyles>;\n\nexport type Props<T> = SingleValueProps<SelectableValue<T>, boolean, GroupBase<SelectableValue<T>>>;\n\nexport const SingleValue = <T extends unknown>(props: Props<T>) => {\n  const { children, data, isDisabled } = props;\n  const styles = useStyles2(getStyles);\n  const loading = useDelayedSwitch(data.loading || false, { delay: 250, duration: 750 });\n\n  return (\n    <components.SingleValue\n      {...props}\n      className={cx(styles.singleValue, isDisabled && styles.disabled, props.selectProps.menuIsOpen && styles.isOpen)}\n    >\n      {data.imgUrl ? (\n        <FadeWithImage\n          loading={loading}\n          imgUrl={data.imgUrl}\n          styles={styles}\n          alt={(data.label ?? data.value) as string}\n        />\n      ) : (\n        <SlideOutTransition horizontal size={16} visible={loading} duration={150}>\n          <div className={styles.spinnerWrapper}>\n            <Spinner className={styles.spinnerIcon} inline />\n          </div>\n        </SlideOutTransition>\n      )}\n      {!data.hideText && children}\n    </components.SingleValue>\n  );\n};\n\nconst FadeWithImage = (props: { loading: boolean; imgUrl: string; styles: StylesType; alt?: string }) => {\n  return (\n    <div className={props.styles.spinnerWrapper}>\n      <FadeTransition duration={150} visible={props.loading}>\n        <Spinner className={props.styles.spinnerIcon} inline />\n      </FadeTransition>\n      <FadeTransition duration={150} visible={!props.loading}>\n        <img className={props.styles.spinnerIcon} src={props.imgUrl} alt={props.alt} />\n      </FadeTransition>\n    </div>\n  );\n};\n"],"names":["React"],"mappings":"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"}