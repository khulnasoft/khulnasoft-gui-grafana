{"version":3,"file":"Tooltip.js","sources":["../../../../src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\n\nimport { colorManipulator, GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { Portal } from '../Portal/Portal';\n\nimport { PopoverContent, TooltipPlacement } from './types';\n\nexport interface TooltipProps {\n  theme?: 'info' | 'error' | 'info-alt';\n  show?: boolean;\n  placement?: TooltipPlacement;\n  content: PopoverContent;\n  children: JSX.Element;\n  /**\n   * Set to true if you want the tooltip to stay long enough so the user can move mouse over content to select text or click a link\n   */\n  interactive?: boolean;\n}\n\nexport const Tooltip = React.memo(({ children, theme, interactive, show, placement, content }: TooltipProps) => {\n  const [controlledVisible, setControlledVisible] = React.useState(show);\n\n  useEffect(() => {\n    if (controlledVisible !== false) {\n      const handleKeyDown = (enterKey: KeyboardEvent) => {\n        if (enterKey.key === 'Escape') {\n          setControlledVisible(false);\n        }\n      };\n      document.addEventListener('keydown', handleKeyDown);\n      return () => {\n        document.removeEventListener('keydown', handleKeyDown);\n      };\n    } else {\n      return;\n    }\n  }, [controlledVisible]);\n\n  const { getArrowProps, getTooltipProps, setTooltipRef, setTriggerRef, visible, update } = usePopperTooltip({\n    visible: controlledVisible,\n    placement: placement,\n    interactive: interactive,\n    delayHide: interactive ? 100 : 0,\n    delayShow: 150,\n    offset: [0, 8],\n    trigger: ['hover', 'focus'],\n    onVisibleChange: setControlledVisible,\n  });\n\n  const styles = useStyles2(getStyles);\n  const containerStyle = styles[theme ?? 'info'];\n\n  return (\n    <>\n      {React.cloneElement(children, {\n        ref: setTriggerRef,\n      })}\n      {visible && (\n        <Portal>\n          <div ref={setTooltipRef} {...getTooltipProps({ className: containerStyle })}>\n            <div {...getArrowProps({ className: 'tooltip-arrow' })} />\n            {typeof content === 'string' && content}\n            {React.isValidElement(content) && React.cloneElement(content)}\n            {typeof content === 'function' &&\n              update &&\n              content({\n                updatePopperPosition: update,\n              })}\n          </div>\n        </Portal>\n      )}\n    </>\n  );\n});\n\nTooltip.displayName = 'Tooltip';\n\nfunction getStyles(theme: GrafanaTheme2) {\n  function buildTooltipTheme(tooltipBg: string, tooltipBorder: string, tooltipText: string) {\n    return css`\n      background-color: ${tooltipBg};\n      border-radius: 3px;\n      border: 1px solid ${tooltipBorder};\n      box-shadow: ${theme.shadows.z2};\n      color: ${tooltipText};\n      font-size: ${theme.typography.bodySmall.fontSize};\n      padding: ${theme.spacing(0.5, 1)};\n      transition: opacity 0.3s;\n      z-index: ${theme.zIndex.tooltip};\n      max-width: 400px;\n      overflow-wrap: break-word;\n\n      &[data-popper-interactive='false'] {\n        pointer-events: none;\n      }\n\n      .tooltip-arrow {\n        height: 1rem;\n        position: absolute;\n        width: 1rem;\n        pointer-events: none;\n      }\n\n      .tooltip-arrow::before {\n        border-style: solid;\n        content: '';\n        display: block;\n        height: 0;\n        margin: auto;\n        width: 0;\n      }\n\n      .tooltip-arrow::after {\n        border-style: solid;\n        content: '';\n        display: block;\n        height: 0;\n        margin: auto;\n        position: absolute;\n        width: 0;\n      }\n\n      &[data-popper-placement*='bottom'] .tooltip-arrow {\n        left: 0;\n        margin-top: -10px;\n        top: 0;\n      }\n\n      &[data-popper-placement*='bottom'] .tooltip-arrow::before {\n        border-color: transparent transparent ${tooltipBorder} transparent;\n        border-width: 0 8px 7px 8px;\n        position: absolute;\n        top: -1px;\n      }\n\n      &[data-popper-placement*='bottom'] .tooltip-arrow::after {\n        border-color: transparent transparent ${tooltipBg} transparent;\n        border-width: 0 8px 7px 8px;\n      }\n\n      &[data-popper-placement*='top'] .tooltip-arrow {\n        bottom: 0;\n        left: 0;\n        margin-bottom: -11px;\n      }\n\n      &[data-popper-placement*='top'] .tooltip-arrow::before {\n        border-color: ${tooltipBorder} transparent transparent transparent;\n        border-width: 7px 8px 0 7px;\n        position: absolute;\n        top: 1px;\n      }\n\n      &[data-popper-placement*='top'] .tooltip-arrow::after {\n        border-color: ${tooltipBg} transparent transparent transparent;\n        border-width: 7px 8px 0 7px;\n      }\n\n      &[data-popper-placement*='right'] .tooltip-arrow {\n        left: 0;\n        margin-left: -11px;\n      }\n\n      &[data-popper-placement*='right'] .tooltip-arrow::before {\n        border-color: transparent ${tooltipBorder} transparent transparent;\n        border-width: 7px 6px 7px 0;\n      }\n\n      &[data-popper-placement*='right'] .tooltip-arrow::after {\n        border-color: transparent ${tooltipBg} transparent transparent;\n        border-width: 6px 7px 7px 0;\n        left: 2px;\n        top: 1px;\n      }\n\n      &[data-popper-placement*='left'] .tooltip-arrow {\n        margin-right: -10px;\n        right: 0;\n      }\n\n      &[data-popper-placement*='left'] .tooltip-arrow::before {\n        border-color: transparent transparent transparent ${tooltipBorder};\n        border-width: 7px 0px 6px 7px;\n      }\n\n      &[data-popper-placement*='left'] .tooltip-arrow::after {\n        border-color: transparent transparent transparent ${tooltipBg};\n        border-width: 6px 0 5px 5px;\n        left: 1px;\n        top: 1px;\n      }\n\n      code {\n        border: none;\n        display: inline;\n        background: ${colorManipulator.darken(tooltipBg, 0.1)};\n        color: ${tooltipText};\n      }\n\n      pre {\n        background: ${colorManipulator.darken(tooltipBg, 0.1)};\n        color: ${tooltipText};\n      }\n\n      a {\n        color: ${tooltipText};\n        text-decoration: underline;\n      }\n\n      a:hover {\n        text-decoration: none;\n      }\n    `;\n  }\n\n  const info = buildTooltipTheme(\n    theme.components.tooltip.background,\n    theme.components.tooltip.background,\n    theme.components.tooltip.text\n  );\n  const error = buildTooltipTheme(theme.colors.error.main, theme.colors.error.main, theme.colors.error.contrastText);\n\n  return {\n    info: info,\n    ['info-alt']: info,\n    error,\n  };\n}\n"],"names":["React"],"mappings":"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"}